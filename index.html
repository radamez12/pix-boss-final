<!DOCTYPE html>
<html lang="pt-br" class="notranslate" translate="no">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="google" content="notranslate">
    <title>PIX-BOSS | Imp√©rio Oficial</title>
    
    <!-- Bibliotecas de V√≠deo, Banco de Dados e Design -->
    <script src="https://download.agora.io/sdk/release/AgoraRTC_N-4.11.0.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="https://cdn.tailwindcss.com"></script>

    <style>
        body { background-color: #050505; color: white; font-family: sans-serif; margin: 0; padding: 0; overflow-x: hidden; user-select: none; }
        header { padding: 15px; border-bottom: 1px solid #222; background: #000; display: flex; justify-content: space-between; align-items: center; position: sticky; top: 0; z-index: 100; }
        .neon-gold { color: #ffd700; text-shadow: 0 0 10px #ffd700; font-weight: 900; }
        .neon-purple { color: #bc13fe; text-shadow: 0 0 10px #bc13fe; font-weight: 900; }
        
        /* Sistema de Abas Infal√≠vel */
        .secao { display: none; padding: 15px; text-align: center; padding-bottom: 180px; }
        .secao-ativa { display: block !important; }
        
        footer { position: fixed; bottom: 0; width: 100%; max-width: 448px; background: #000; border-top: 1px solid #222; display: flex; justify-content: space-around; z-index: 1000; padding: 10px 0; padding-bottom: env(safe-area-inset-bottom); }
        .nav-tab { color: #444; font-size: 8px; font-weight: bold; text-align: center; flex: 1; cursor: pointer; text-decoration: none; }
        .nav-active { color: #bc13fe !important; border-top: 2px solid #bc13fe; }
        
        .glass { background: rgba(255, 255, 255, 0.03); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 25px; padding: 15px; margin-bottom: 15px; }
        .bg-boss { background: linear-gradient(90deg, #bc13fe, #8a2be2); color: white; border-radius: 12px; padding: 15px; font-weight: bold; border: none; width: 100%; cursor: pointer; }
        input, select { background: #111 !important; border: 1px solid #333 !important; color: white !important; width: 100%; padding: 12px; border-radius: 10px; margin-bottom: 10px; outline: none; text-align: center; }
        
        .wheel { width: 220px; height: 220px; border-radius: 50%; border: 4px solid #bc13fe; margin: 20px auto; transition: 4s cubic-bezier(0.15, 0, 0.15, 1); background: #000; display: flex; align-items: center; justify-content: center; }
        .blur-photo { filter: blur(25px); opacity: 0.5; }
        #v-player { width: 100%; height: 320px; background: #000; border-radius: 40px; border: 1px solid #bc13fe; overflow: hidden; position: relative; }
        #ghost-tag { position: fixed; top: 10px; right: 10px; background: #00ff00; color: #000; font-size: 7px; padding: 2px 5px; border-radius: 10px; font-weight: 900; z-index: 2001; }
    </style>
</head>
<body class="max-w-md mx-auto">

    <div id="ghost-tag" class="hidden animate-pulse">‚óè MODO GHOST ATIVO</div>

    <!-- PORT√ÉO DE ENTRADA / LOGIN / CADASTRO -->
    <div id="auth-screen" style="position: fixed; inset: 0; background: #000; z-index: 3000; padding: 30px; overflow-y: auto;">
        <div class="text-center mb-8">
            <h1 class="neon-gold text-4xl italic">PIX-BOSS</h1>
            <p class="text-[10px] text-gray-500 uppercase tracking-[4px] mt-2 font-bold">Imp√©rio Digital</p>
        </div>

        <div id="auth-choice" class="space-y-4">
            <button onclick="setAuth('user')" class="bg-boss w-full py-5 rounded-2xl font-black uppercase italic shadow-lg">Entrar como Usu√°rio</button>
            <button onclick="setAuth('model')" class="bg-white text-black w-full py-5 rounded-2xl font-black uppercase italic shadow-lg">Sou Modelo / Criador</button>
            <button onclick="setAuth('staff')" class="text-gray-700 text-[9px] block mx-auto uppercase font-black underline mt-10">Acesso Equipe e Presidente</button>
        </div>

        <div id="auth-form" class="hidden space-y-3">
            <h2 id="form-title" class="text-center font-bold text-purple-400 mb-6 uppercase">Cadastro</h2>
            <input id="reg-nome" type="text" placeholder="Apelido / Nome Art√≠stico">
            <input id="reg-email" type="email" placeholder="E-mail ou Telefone">
            <div class="relative">
                <input id="reg-pass" type="password" placeholder="Crie uma Senha">
                <span onclick="tglEye('reg-pass')" style="position:absolute; right:15px; top:12px; cursor:pointer;">üëÅÔ∏è</span>
            </div>
            
            <div id="model-extra" class="hidden glass border-purple-900/50">
                <input id="reg-pix" type="text" placeholder="Sua Chave PIX">
                <p class="text-[9px] text-gray-500 italic text-center uppercase font-bold">Ganhe 75% ‚Ä¢ Saque R$ 100 M√≠n.</p>
            </div>

            <button onclick="executarLogin()" class="bg-boss w-full py-4 rounded-xl font-black uppercase shadow-xl">Confirmar Entrada</button>
            <button onclick="location.reload()" class="text-[9px] text-gray-600 block mx-auto mt-4 underline font-bold uppercase text-white">Voltar</button>
        </div>
    </div>

    <!-- HEADER DO APP -->
    <header>
        <h1 class="neon-purple italic text-xl">PIX-BOSS</h1>
        <div id="topo-saldo" class="text-yellow-500 font-bold text-[11px] bg-white/5 px-3 py-1 rounded-full border border-white/10">0 Gems</div>
    </header>

    <!-- TELA 1: FEED (HOME) -->
    <div id="tela-home" class="secao secao-ativa">
        <h3 style="font-size:10px; color:#555; letter-spacing:2px; margin-bottom:15px; font-weight: 900;">FEED PRIVADO</h3>
        <div class="glass" onclick="irPara('live')">
            <p style="text-align:left; font-size:12px; font-weight:bold; margin-bottom:10px;">Leticia_Hot üîû <small style="color:blue">‚úì</small></p>
            <div style="position:relative; width:100%; height:320px; background:#000; border-radius:20px; overflow:hidden;">
                <img src="https://images.unsplash.com/photo-1515886657613-9f3515b0c78f?auto=format&fit=crop&w=400" class="blur-photo" style="width:100%; height:100%; object-fit:cover;">
                <div style="position:absolute; inset:0; display:flex; align-items:center; justify-content:center;">
                    <button class="bg-boss mt-4 font-black italic uppercase text-[10px]" onclick="alert('Saldo insuficiente!')">üîì VER POR 10 GEMS</button>
                </div>
            </div>
        </div>
    </div>

    <!-- TELA 2: ROLETA -->
    <div id="tela-roulette" class="secao">
        <h2 class="neon-gold text-2xl uppercase italic">Roleta Sorte</h2>
        <div class="relative">
            <div style="position: absolute; top: -10px; left: 50%; transform: translateX(-50%); z-index: 10; font-size: 20px;">‚¨áÔ∏è</div>
            <div id="wheel" class="wheel"><div style="font-size: 7px; opacity: 0.3; font-weight: 900;">5 | 15 | 30 | 100 | 250</div></div>
        </div>
        <button onclick="girarRoleta()" class="bg-boss font-black mt-4 uppercase">GIRAR (15 GEMS)</button>
    </div>

    <!-- TELA 3: LIVE (MOTOR REAL) -->
    <div id="tela-live" class="secao">
        <div id="v-player">
            <div id="agora-video" style="width:100%; height:100%;"></div>
            <div id="bunny-ears" style="display:none; position:absolute; inset:0; align-items:center; justify-content:center; font-size:60px; margin-top:-160px;">üê∞</div>
            <div style="position:absolute; top:15px; left:15px; background:red; font-size:8px; font-weight:900; padding:2px 6px; border-radius:5px;">LIVE SEGURA</div>
        </div>
        <div class="grid grid-cols-2 gap-2 mb-4">
            <button onclick="document.getElementById('agora-video').style.filter='saturate(2)'" class="glass text-[8px] font-black uppercase text-white">‚ú® DIVA</button>
            <button onclick="document.getElementById('bunny-ears').style.display='flex'" class="glass text-[8px] font-black uppercase text-white">üê∞ COELHO</button>
        </div>
        <div class="grid grid-cols-2 gap-2">
            <button onclick="startLive('camera')" class="bg-boss text-[9px] font-black uppercase shadow-lg">üé• C√ÇMERA</button>
            <button onclick="startLive('game')" class="bg-boss text-[9px] font-black uppercase shadow-lg" style="background:#ff4500;">üéÆ JOGOS</button>
        </div>
        <button onclick="assistir()" style="width:100%; background:#111; color:white; border:1px solid #333; padding:15px; border-radius:15px; margin-top:10px; font-weight:bold; font-size:10px;">ASSISTIR TRANSMISS√ÉO</button>
    </div>

    <!-- TELA 4: SHOP (DE 5 EM 5) -->
    <div id="tela-gems" class="secao">
        <h2 class="neon-gold text-xl mb-4 italic">LOJA DE GEMS</h2>
        <div style="display: grid; grid-template-cols: 1fr 1fr 1fr; gap: 8px;" id="loja-itens"></div>
        <div id="pix-area" style="display:none;" class="glass border-green-600 animate-pulse mt-4 text-center">
            <p style="color:#00ff00; font-size:9px; font-weight:bold;">CHAVE PIX DO PRESIDENTE:</p>
            <p style="font-size:10px; margin:10px 0; font-weight:bold; color:white;">0f549cdb-6acb-4af9-bd96-890360d4cdf8</p>
            <button onclick="window.open('https://wa.me/5567981251773')" class="bg-boss" style="background:white; color:black; font-size:10px; border-radius: 10px;">PAGUEI! LIBERAR MOEDAS</button>
        </div>
    </div>

    <!-- TELA 5: GEST√ÉO -->
    <div id="tela-gestao" class="secao">
        <div id="painel-dono" style="text-align: left;">
            <div class="glass" style="background:#bc13fe; padding:30px; color:white;">
                <p style="font-size:9px; font-weight:bold; opacity:0.7;">SEU ESTOQUE</p>
                <h2 id="estoque-display" style="font-size:22px; font-weight:900;">0 GEMS</h2>
                <div style="font-size:7px; font-weight:900; margin-top:10px; background:black; display:inline-block; padding:3px 8px; border-radius:10px;">SAQUE M√çNIMO: R$ 100,00</div>
            </div>
            <div class="glass" style="margin-top:10px;">
                <p style="font-size:9px; font-weight:bold; color:#bc13fe; margin-bottom:10px;">LIBERAR PARA CLIENTE</p>
                <input id="l-nick" type="text" placeholder="Apelido do Cliente">
                <input id="l-qtd" type="number" placeholder="Quantidade">
                <button onclick="liberarNoSupabase()" class="bg-boss" style="background:#28a745;">LIBERAR E SALVAR</button>
            </div>
        </div>
    </div>

    <!-- NAVBAR INFERIOR -->
    <footer>
        <div id="btn-home" onclick="irPara('home')" class="nav-tab nav-active">üè†<br>In√≠cio</div>
        <div id="btn-roulette" onclick="irPara('roulette')" class="nav-tab">üé°<br>Sorte</div>
        <div id="btn-live" onclick="irPara('live')" class="nav-tab">üé•<br>Live</div>
        <div id="btn-gems" onclick="irPara('gems')" class="nav-tab">üíé<br>Gems</div>
        <div id="btn-gestao" onclick="irPara('gestao')" class="nav-tab">üë§<br>Gest√£o</div>
    </footer>

    <script>
        const _URL = 'https://uwjbmxxehcxaow.supabase.co';
        const _KEY = 'sb_publishable_cvsGGsWffdopP6ooo3Vqjw_D71XLKft';
        const supabase = supabase.createClient(_URL, _KEY);
        const appId = "58b921e58ceb4536b3bca7dd6a12bdba";
        const client = AgoraRTC.createClient({ mode: "live", codec: "vp8" });

        let estoque = 0;
        let role = "";
        const vips = ["px_user_882", "br_vendas_99", "suporte_alpha", "master_px01", "tech_br_vagas", "gestor_moedas", "funcionario_ativo"];

        // Gerar Loja de 5 em 5 at√© 55
        const shop = document.getElementById('loja-itens');
        for(let i=5; i<=55; i+=5) {
            shop.innerHTML += `<div onclick="document.getElementById('pix-area').style.display='block'" class="btn-preco"><b>R$ ${i}</b><br><small>${i} Gems</small></div>`;
        }
        shop.innerHTML += `<div onclick="document.getElementById('pix-area').style.display='block'" class="btn-preco" style="border-color:gold;"><b>R$ 100</b><br><small>120 GEMS</small></div>`;

        function irPara(id) {
            const telas = ['home', 'roulette', 'live', 'gems', 'gestao'];
            telas.forEach(t => {
                document.getElementById('tela-' + t).style.display = 'none';
                document.getElementById('btn-' + t).classList.remove('nav-active');
            });
            document.getElementById('tela-' + id).style.display = 'block';
            document.getElementById('btn-' + id).classList.add('nav-active');
            window.scrollTo(0,0);
        }

        function setAuth(r) {
            role = r;
            document.getElementById('auth-choice').classList.add('hidden');
            document.getElementById('auth-form').classList.remove('hidden');
            document.getElementById('form-title').innerText = r === 'user' ? 'Cadastro Usu√°rio' : r === 'model' ? 'Cadastro Modelo' : 'Acesso Equipe';
            if(r === 'model') document.getElementById('model-extra').classList.remove('hidden');
        }

        async function executarLogin() {
            const u = document.getElementById('reg-nome').value;
            const s = document.getElementById('reg-pass').value;
            if(role === 'staff') {
                if(u === "radamez1228@gmail.com" && s === "Ra@$926629") {
                    estoque = 100000000; logSucesso("PRESIDENTE");
                } else if(vips.includes(u) && s === "PIXXX2024") {
                    estoque = 20000; logSucesso("EQUIPE");
                } else { alert("Acesso negado."); }
            } else {
                document.getElementById('auth-screen').style.display = 'none';
                document.getElementById('topo-saldo').innerText = "10 Gems";
                alert("Bem-vindo! Voc√™ ganhou 10 Gems de brinde.");
            }
        }

        function logSucesso(txt) {
            document.getElementById('auth-screen').style.display = 'none';
            document.getElementById('ghost-tag').classList.remove('hidden');
            document.getElementById('estoque-display').innerText = estoque.toLocaleString() + " GEMS";
            document.getElementById('topo-saldo').innerText = txt;
        }

        async function liberarNoSupabase() {
            const n = document.getElementById('l-nick').value;
            const q = document.getElementById('l-qtd').value;
            await supabase.from('usuarios').upsert({ apelido: n, gems: q }, { onConflict: 'apelido' });
            estoque -= q; if(estoque <= 0) estoque = 100000000;
            document.getElementById('estoque-display').innerText = estoque.toLocaleString() + " GEMS";
            alert("SUCESSO!");
        }

        async function startLive(m) {
            await client.join(appId, "canal-pixxx", null, null);
            const a = await AgoraRTC.createMicrophoneAudioTrack();
            let v = m === 'camera' ? await AgoraRTC.createCameraVideoTrack() : await AgoraRTC.createScreenVideoTrack();
            v.play("agora-video");
            await client.publish([a, v]);
            alert("AO VIVO!");
        }

        async function assistir() {
            await client.join(appId, "canal-pixxx", null, null);
            client.on("user-published", async (u, m) => {
                await client.subscribe(u, m);
                if (m === "video") u.videoTrack.play("agora-video");
            });
        }

        function girarRoleta() {
            const w = document.getElementById('wheel');
            w.style.transform = `rotate(${Math.floor(Math.random()*360)+3600}deg)`;
            setTimeout(() => { alert("Voc√™ ganhou! Pe√ßa as Gems ao Presidente."); }, 4000);
        }

        function tglEye(id) { const i = document.getElementById(id); i.type = i.type==='password'?'text':'password'; }
    </script>
</body>
  </html>
